<div id="instructions">
<h2>This task is a Color memory task. 
	<br> Please only do 1 HIT of this task, do not repeat it.</h2>
<p>This HIT will take approximately 8-10 minutes. You will have to remember a pair of color and report one of them <b>as accurate as possible</b> by clicking on a color wheel. Please do not participate if you have any form of color blindness or do not have normal or corrected-to-normal vision (wearing glasses or contacts is fine). During the HIT, you'll perform 108 trials of the same task; each trial lasts about 3-5 seconds.<p>

<!DOCTYPE html>


<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <div>
        <!-- <div style="text-align:center;">
            <canvas id="myCanvas"  width="600" height="400" style="cursor:default;border:1px solid;outline-width:2px;outline-color:#000000">
            
            </canvas>
        </div> -->
        <p id="instr"></p>
    </div>
    <link rel="stylesheet" href="background_style.css">
    <script src="study1.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    
    <div style="text-align:center;">
            <canvas id="myCanvas"></canvas>
    </div>

    <div id="field"></div>
</head>

<body>
    <div id="grid-container" class="grid-container">
        <div id=box1; class="grid-item"></div>
        <div id="box2"; class="grid-item"></div>
        <div id="box3"; class="grid-item"></div>
        <div id="box4"; class="grid-item"></div>
        <div id="box5"; class="grid-item"></div>
        <div id="box6"; class="grid-item"></div>
        <div id="box7"; class="grid-item"></div>
        <div id="box8"; class="grid-item"></div>
        <div id="box9"; class="grid-item"></div>
        <div id="box10"; class="grid-item"></div>
        <div id="box11"; class="grid-item"></div>
        <div id="box12"; class="grid-item"></div>
        <div id="box13"; class="grid-item"></div>
        <div id="box14"; class="grid-item"></div>
        <div id="box15"; class="grid-item"></div>
        <div id="box16"; class="grid-item"></div>
        <div id="box17"; class="grid-item"></div>
        <div id="box18"; class="grid-item"></div>
        <!-- <div id="box19"; class="grid-item"></div>
        <div id="box20"; class="grid-item"></div>
        <div id="box21"; class="grid-item"></div>
        <div id="box22"; class="grid-item"></div>
        <div id="box23"; class="grid-item"></div>
        <div id="box24"; class="grid-item"></div> -->
    </div>

    <div class="slideContainer" >
        <input type="range" min="10" max="50" value="20" id="myRange" class ="slider">
        <p>value:<span id="value"></span></p>
    </div>



    <script>
        let iti = [500, 1000,1500]      
        iti2 = iti[Math.floor(Math.random()*iti.length)];
        console.log(iti2)

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
        console.log(getParameterByName("subjectId"))

        // var container = document.getElementById("grid-container");
        
        // // Draw circles by CTX
        // let myCanvas = document.getElementById("myCanvas");
        // let ctx = myCanvas.getContext('2d');
        // let centerX=myCanvas.width/2;
        // let centerY=myCanvas.height/2;  
        // let numDots = 8;
        // let xPos=[];
        // let yPos=[];
        // let area = [1.6,1.76,1.94,2.13,2.34,2.58,2.83,3.12]

        
        // for(i=0;i<numDots;i++){
        //     var circle2 = document.createElement('circle2');
        //     circle2.className = 'circle2';
        //     circle2.id = 'circle2'+ i;
        //     makeCircle(circle2+i,20*i,30*i, area[i]*10 ,false,0,'#000000','#000000');
        //     drawCircle(ctx,objects[i]);
            
        // }
        // var $boxNumber = $('.grid-item');
        // var boxNum = $boxNumber.eq(Math.floor(Math.random()*($boxNumber.length - 1))).attr('id');
        // document.getElementById(boxNum).append(circle2);


        
        var boxID = [];
        $(".grid-item").each(function(){ boxID.push(this.id); });


        // for (var i = 0; i < 9; i++) {
        //     var circle = document.createElement("circle");
        //     circle.className = 'circle';
        //     circle.id = 'circle' + i;
        //     var $boxNumber = $('.grid-item');
        //     var boxNum = $boxNumber.eq(Math.floor(Math.random()*($boxNumber.length - 1))).attr('id')
        //     document.getElementById(boxNum).appendChild(circle);
        // }

        let area = [1.6,1.76,1.94,2.13,2.34,2.58,2.83,3.12]
        var $boxNumber = $('.grid-item');
        var boxNum = $boxNumber.eq(Math.floor(Math.random()*($boxNumber.length - 1)))
        


        // //Append canvas to grid
        // var canvas = $('<canvas width="100" height="100"></canvas>');
        // $(boxNum).append(canvas);

        // var ctx = canvas[0].getContext('2d');    
        // makeCircle('id',40,40, area[0]*10 ,false,0,'#000000','#000000');
        // drawCircle(ctx,circle);
        
        
        //To assess where is the target circle
        boxSequence = [];
        circleX =[];
        circleY=[];
        setCircleX=[];
        setCircleY=[];
 

        for (let i=0; i<8; i++){
            var $boxNumber = $('.grid-item');
            // var boxNum  = $boxNumber.eq(Math.floor(Math.random()*($boxNumber.length - 1)))
            var boxNum2 = randomValueFromArray($boxNumber);
            var canvas = $('<canvas width="120" height="150"></canvas>');
            $(boxNum2).append(canvas);
            var ctx = canvas[0].getContext('2d');
            circleX = generateRandom(50, 70)
            circleY = generateRandom(65, 85)
            makeCircle('id',circleX, circleY, area[i]*10 ,false,0,'#000000','#000000');
            drawCircle(ctx,circle);
           
            boxSequence.push(boxNum2);
            setCircleX.push(circleX);
            setCircleY.push(circleY);       
            
            
        }
        // console.log(boxSequence);
        console.log(boxSequence)
        console.log(setCircleX)
        console.log(setCircleY)




    //     function generateRandomCircle(circleSize){
    //     for (let i=0; i<8; i++){
    //     var $boxNumber = $('.grid-item');
    //     var boxNum = randomValueFromArray($boxNumber);
    //     var canvas = $('<canvas width="100" height="100"></canvas>');
    //     $(boxNum).append(canvas);
    //     var ctx = canvas[0].getContext('2d');    
    //     makeCircle('id',50,50, circleSize[i]*10 ,false,0,'#000000','#000000');
    //     drawCircle(ctx,circle);    
    //     boxSequence.push(boxNum);  
    //     }
    // }
        
        ////clear grid
        $('.grid-item').empty();  
        
               

        //generate target circle after saw a task 
        // targetCircle = boxSequence[1];
        // // console.log(targetCircle);
        // $(targetCircle).append(canvas);
        // var ctx = canvas[0].getContext('2d');    
        // makeCircle('id',40,40, 10 ,false,0,'#000000','#000000');
        // drawCircle(ctx,circle);


        
        //TO see visualize from Sliding bar
        // var slider = document.getElementById("myRange");
        // var output = document.getElementById("value");
        // output.innerHTML = slider.value;


        // slider.oninput = function() {
        //     output.innerHTML = this.value;
        //     // console.log(output.innerHTML)
        // } 
        
        finalValue = [];
        getValue=[];
        
        
        function createTargetCircle(){
            let SldrVal = document.getElementById("myRange").value
            // console.log(SldrVal)
            targetCircle = boxSequence[1];
            $(targetCircle).append(canvas);
            var ctx = canvas[0].getContext('2d');
            // makeCircle('id',40,40, SldrVal*0.1 ,false,0,'#000000','#000000');
            // drawCircle(ctx,circle);
            // ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.clearRect(0, 0, 120, 150);
            ctx.beginPath();
            ctx.arc(setCircleX[0], setCircleX[0], SldrVal, 0, 2 * Math.PI);
            ctx.fill();
            getValue.push(SldrVal)
            console.log(setCircleX[0]);
            
            
            //To adjust size of circle
            respondCircle = requestAnimationFrame(createTargetCircle)
            
            
        }
        createTargetCircle();
        
        
        
        //Reset slider
         // document.getElementById("myRange").value=10

        // cancelAnimationFrame(respondCircle);
        // $('.grid-item').empty();  
    
        
    </script>
    
</body>
</html>